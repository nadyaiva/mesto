(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r,o){var i=t.handleCardClick,a=t.handleDeleteClick,u=t.handleToggleLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardItem=n,this._handleCardClick=i,this._cardSelector=r,this._likes=n.likes,this._element=this._getTemplate(),this._trashButtonElement=this._element.querySelector(".elements__button_trash"),this._buttonLikeElement=this._element.querySelector(".elements__button_like"),this._countLikeElem=this._element.querySelector(".elements__info_like-count"),this._imageElem=this._element.querySelector(".elements__image"),this._captionElem=this._element.querySelector(".elements__caption"),this._handleDelete=a,this._handleToggleLike=u,this._userId=o}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._imageElem.src=this._cardItem.link,this._imageElem.alt=this._cardItem.name,this._captionElem.textContent=this._cardItem.name,this._countLikeElem.textContent=this._likes.length,this._setEventListeners(),this._cardItem.owner._id!=this._userId&&this._trashButtonElement.classList.add("elements__button_trash_hidden"),this.isLiked()&&this._buttonLikeElement.classList.add("elements__button_like_active"),this._element}},{key:"_handleFullscreen",value:function(){this._handleCardClick(this._cardItem)}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLikeElement.addEventListener("click",(function(){t._handleToggleLike(t,t._cardItem._id)})),this._trashButtonElement.addEventListener("click",(function(){t._handleDelete(t,t._cardItem,t._element)})),this._imageElem.addEventListener("click",(function(){t._handleFullscreen()}))}},{key:"isLiked",value:function(){var t=this;return Boolean(this._likes.find((function(e){return e._id===t._userId})))}},{key:"statusliketoggle",value:function(t){this._countLikeElem.textContent=t.likes.length,this.isLiked()?this._buttonLikeElement.classList.remove("elements__button_like_active"):this._buttonLikeElement.classList.add("elements__button_like_active"),this._likes=t.likes}},{key:"deleteCard",value:function(){this._element.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}var e,r;return e=t,(r=[{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));n.textContent=e,n.classList.add(this._errorClass),t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));null!=e&&(t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent="")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():this.activateButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState(),this._formElement.reset()}},{key:"disableButton",value:function(){this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.add(this._inactiveButtonClass)}},{key:"activateButton",value:function(){this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._form=this._popup.querySelector(".form"),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){if(27===t.which){var e=document.querySelector(".popup_opened");this.close(e)}}},{key:"setEventListeners",value:function(){var t=this;document.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&t.close()}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._fullscreenImage=e._popup.querySelector(".popup-fullscreen__image"),e._fullscreenCaption=e._popup.querySelector(".popup-fullscreen__caption"),e}return e=a,(n=[{key:"open",value:function(t){this._fullscreenImage.src=t.link,this._fullscreenCaption.textContent=t.name,this._fullscreenImage.alt=t.name,s(d(a.prototype),"open",this).call(this)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=b(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function k(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(o){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._formSubmit=n,r._inputList=r._popup.querySelectorAll(".popup__input"),r._formValidator=e,r._formValidator.resetValidation(),r._submitButton=r._form.querySelector(".popup__save-button"),r}return e=a,(n=[{key:"renderLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"_getInputValues",value:function(){var t=this;return this._inputValues={},this._inputList.forEach((function(e){t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name].textContent}))}},{key:"close",value:function(){v(E(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;v(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues())}))}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=C(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function C(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function I(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return I(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._submitButton=e._form.querySelector(".popup__save-button"),e}return e=a,(n=[{key:"renderLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"visualizeLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"setSubmitHandler",value:function(t){this._formSubmit=t}},{key:"setEventListeners",value:function(){var t=this;O(P(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(),t.close()}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(n),this._avatarElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{fullname:this._nameElement,jobtitle:this._jobElement}}},{key:"setUserInfo",value:function(t){var e=t.nameInput,n=t.jobInput;this._nameElement.textContent=e,this._jobElement.textContent=n}},{key:"setUserAvatar",value:function(t){this._avatarElement.src=t}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authorization=e.authorization,this._cohort=e.cohort,this._baseurl=e.baseurl}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfoApi",value:function(){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"updateUserInfo",value:function(t,e){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"addNewCard",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t.cardname,link:t.link})}).then(this._handleResponse)}},{key:"changeCardLikeStatus",value:function(t,e){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards/").concat(t,"/likes"),{method:e?"PUT":"DELETE",headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"deletePost",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var z,V,D=document.querySelector(".profile__button_type_add"),U=document.querySelector(".profile__button_type_edit"),N=document.querySelector(".profile__avatar"),H={};V={formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(V.formSelector)).forEach((function(t){var e=new r(V,t);H[t.name]=e,e.enableValidation()}));var J=new A({authorization:"d94e7cf1-3761-45b6-9798-0ad1da8f2858",cohort:"cohort-42",baseurl:"https://nomoreparties.co/v1/"}),F=new B(".profile__name",".profile__title",".profile__avatar");Promise.all([J.getUserInfoApi(),J.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];F.setUserAvatar(o.avatar),F.setUserInfo({nameInput:o.name,jobInput:o.about}),z=o._id,M.renderItems(i)})).catch((function(t){return console.log(t)}));var M=new i({renderer:function(t){M.addItem(Q(t))}},".elements"),$=new _(".popup-fullscreen"),G=function(t){$.open(t)},K=new R(".popup_place_confirm");function Q(t){var n=new e({handleCardClick:G,handleDeleteClick:function(t){K.renderLoading("Да"),K.setSubmitHandler((function(){J.deletePost(t._cardItem._id).then((function(t){n.deleteCard(),K.close()})).catch((function(t){return console.log(t)})).finally(K.renderLoading("Удаление..."))})),K.open()},handleToggleLike:function(t,e){J.changeCardLikeStatus(e,!t.isLiked()).then((function(e){console.log("andleToggleLikeClick",e),t.statusliketoggle(e)})).catch((function(t){return console.log(t)}))}},t,".element-template_default",z);return n.generateCard()}var W=new w(".popup_place_add-photo",H["popup-add-photo"],(function(t){J.addNewCard(t).then((function(t){M.addItem(Q(t)),W.close()})).catch((function(t){console.log(t)})).finally((function(){W.renderLoading("Сохранение...")}))})),X=new w(".popup_place_avatar",H["popup-avatar"],(function(t){J.updateAvatar(t.link).then((function(t){F.setUserAvatar(t.avatar),X.close()})).catch((function(t){console.log("Ошибка. Запрос не выполнен: ",t)})).finally((function(){X.renderLoading("Сохранение...")}))})),Y=new w(".popup_place_edit-profile",H["form-profile"],(function(t){J.updateUserInfo(t.fullname,t.jobtitle).then((function(){F.setUserInfo({nameInput:t.fullname,jobInput:t.jobtitle}),Y.close()})).catch((function(t){console.log("Ошибка. Запрос не выполнен: ",t)})).finally((function(){Y.renderLoading("Сохранение...")}))}));X.setEventListeners(),Y.setEventListeners(),K.setEventListeners(),W.setEventListeners(),$.setEventListeners(),U.addEventListener("click",(function(){H["form-profile"].resetValidation(),Y.setInputValues(F.getUserInfo()),Y.renderLoading("Сохранить"),Y.open()})),D.addEventListener("click",(function(){H["popup-add-photo"].resetValidation(),W.renderLoading("Создать"),W.open()})),N.addEventListener("click",(function(){H["popup-avatar"].resetValidation(),X.renderLoading("Сохранить"),X.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFpQixTQUFTLFdBQ3ZDaUksRUFBZSxtQkFBbUJ0RCxrQkFDbEN1RixFQUFhUixjQUFjLFdBQzNCUSxFQUFhWCxVQUdmdkIsRUFBYWhJLGlCQUFpQixTQUFTLFdBQ3JDaUksRUFBZSxnQkFBZ0J0RCxrQkFDL0J5RixFQUFXVixjQUFjLGFBQ3pCVSxFQUFXYixXIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVUb2dnbGVMaWtlIH0sXG4gICAgZGF0YSxcbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgdXNlcklkXG4gICkge1xuICAgIHRoaXMuX2NhcmRJdGVtID0gZGF0YTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICB0aGlzLl90cmFzaEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50c19fYnV0dG9uX3RyYXNoXCJcbiAgICApO1xuICAgIHRoaXMuX2J1dHRvbkxpa2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIuZWxlbWVudHNfX2J1dHRvbl9saWtlXCJcbiAgICApO1xuICAgIHRoaXMuX2NvdW50TGlrZUVsZW0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50c19faW5mb19saWtlLWNvdW50XCJcbiAgICApO1xuICAgIHRoaXMuX2ltYWdlRWxlbSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbkVsZW0gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2NhcHRpb25cIik7XG4gICAgdGhpcy5faGFuZGxlRGVsZXRlID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZSA9IGhhbmRsZVRvZ2dsZUxpa2U7XG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudHNfX2VsZW1lbnRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuICB9XG5cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2ltYWdlRWxlbS5zcmMgPSB0aGlzLl9jYXJkSXRlbS5saW5rO1xuICAgIHRoaXMuX2ltYWdlRWxlbS5hbHQgPSB0aGlzLl9jYXJkSXRlbS5uYW1lO1xuICAgIHRoaXMuX2NhcHRpb25FbGVtLnRleHRDb250ZW50ID0gdGhpcy5fY2FyZEl0ZW0ubmFtZTtcbiAgICB0aGlzLl9jb3VudExpa2VFbGVtLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgaWYgKHRoaXMuX2NhcmRJdGVtLm93bmVyLl9pZCAhPSB0aGlzLl91c2VySWQpIHtcbiAgICAgIHRoaXMuX3RyYXNoQnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudHNfX2J1dHRvbl90cmFzaF9oaWRkZW5cIik7XG4gICAgfVxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSlcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fYnV0dG9uX2xpa2VfYWN0aXZlXCIpO1xuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xuICB9XG5cbiAgX2hhbmRsZUZ1bGxzY3JlZW4oKSB7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2NhcmRJdGVtKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25MaWtlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlVG9nZ2xlTGlrZSh0aGlzLCB0aGlzLl9jYXJkSXRlbS5faWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fdHJhc2hCdXR0b25FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGUodGhpcywgdGhpcy5fY2FyZEl0ZW0sIHRoaXMuX2VsZW1lbnQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5faW1hZ2VFbGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVGdWxsc2NyZWVuKCk7XG4gICAgfSk7XG4gIH1cblxuICBpc0xpa2VkKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuX2xpa2VzLmZpbmQoKGl0ZW0pID0+IGl0ZW0uX2lkID09PSB0aGlzLl91c2VySWQpKTtcbiAgfVxuICBzdGF0dXNsaWtldG9nZ2xlKGRhdGEpIHtcbiAgICB0aGlzLl9jb3VudExpa2VFbGVtLnRleHRDb250ZW50ID0gZGF0YS5saWtlcy5sZW5ndGg7XG4gICAgaWYgKCF0aGlzLmlzTGlrZWQoKSlcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fYnV0dG9uX2xpa2VfYWN0aXZlXCIpO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50c19fYnV0dG9uX2xpa2VfYWN0aXZlXCIpO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWcuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gY29uZmlnLmlucHV0RXJyb3JDbGFzcztcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gY29uZmlnLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgICk7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcilcbiAgICApO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShmb3JtSW5wdXQpIHtcbiAgICBpZiAoIWZvcm1JbnB1dC52YWxpZGl0eS52YWxpZCkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoZm9ybUlucHV0LCBmb3JtSW5wdXQudmFsaWRhdGlvbk1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihmb3JtSW5wdXQpO1xuICAgIH1cbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihmb3JtSW5wdXQsIGVycm9yTWVzc2FnZSkge1xuICAgIGNvbnN0IGZvcm1FcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2Zvcm1JbnB1dC5pZH0tZXJyb3JgKTsgXG4gICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xuICAgIGZvcm1FcnJvci5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoZm9ybUlucHV0KSB7XG4gICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Zm9ybUlucHV0LmlkfS1lcnJvcmApOyBcbiAgICBpZiAoZm9ybUVycm9yICE9IG51bGwpIHtcbiAgICAgIGZvcm1JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgICAgIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3RpdmF0ZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgfVxuXG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIGFjdGl2YXRlQnV0dG9uKCkge1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlbmRlckl0ZW1zKGNhcmRJdGVtcykge1xuICAgIGNhcmRJdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIFxuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKVxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGNvbnN0IEVTQ19LRVlDT0RFID0gMjc7XG4gICAgaWYgKGV2dC53aGljaCA9PT0gRVNDX0tFWUNPREUpIHtcbiAgICAgIGNvbnN0IGFjdGl2ZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9vcGVuZWRcIik7XG4gICAgICB0aGlzLmNsb3NlKGFjdGl2ZVBvcHVwKTtcbiAgICB9XG4gIH1cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcbiAgICAgIGlmIChcbiAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwX19jbG9zZVwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Z1bGxzY3JlZW5JbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cC1mdWxsc2NyZWVuX19pbWFnZVwiXG4gICAgKTtcbiAgICB0aGlzLl9mdWxsc2NyZWVuQ2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5wb3B1cC1mdWxsc2NyZWVuX19jYXB0aW9uXCJcbiAgICApO1xuICB9XG4gIG9wZW4oY2FyZEl0ZW0pIHtcbiAgICB0aGlzLl9mdWxsc2NyZWVuSW1hZ2Uuc3JjID0gY2FyZEl0ZW0ubGluaztcbiAgICB0aGlzLl9mdWxsc2NyZWVuQ2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRJdGVtLm5hbWU7XG4gICAgdGhpcy5fZnVsbHNjcmVlbkltYWdlLmFsdCA9IGNhcmRJdGVtLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBmb3JtVmFsaWRhdG9yLCBmb3JtU3VibWl0KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZm9ybVN1Ym1pdCA9IGZvcm1TdWJtaXQ7XG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvciA9IGZvcm1WYWxpZGF0b3I7XG4gICAgdGhpcy5fZm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcodGV4dCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGAke3RleHR9YDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHtcbiAgICAgIHRoaXMuX2lucHV0VmFsdWVzW2lucHV0SXRlbS5uYW1lXSA9IGlucHV0SXRlbS52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gZGF0YVtpbnB1dEVsZW1lbnQubmFtZV0udGV4dENvbnRlbnQ7XG4gICAgfSk7XG4gIH0gXG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiB9XG5cbiByZW5kZXJMb2FkaW5nKHRleHQpIHtcbiAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGV4dH1gO1xufVxuXG4gdmlzdWFsaXplTG9hZGluZyh0ZXh0KSB7XG4gIHRoaXMuX3N1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IGAke3RleHR9YDtcbn1cblxuc2V0U3VibWl0SGFuZGxlcihjb2xsYmFjaykge1xuICB0aGlzLl9mb3JtU3VibWl0ID0gY29sbGJhY2s7XG59XG5cbiBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2Zvcm1TdWJtaXQoKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IobmFtZVNlbGVjdG9yLCBqb2JTZWxlY3RvciwgYXZhdGFyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7IGZ1bGxuYW1lOiB0aGlzLl9uYW1lRWxlbWVudCwgam9idGl0bGU6IHRoaXMuX2pvYkVsZW1lbnQgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZUlucHV0LCBqb2JJbnB1dCB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lSW5wdXQ7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGpvYklucHV0O1xuICB9XG4gIHNldFVzZXJBdmF0YXIoYXZhdGFyVVJMKSB7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXJVUkw7XG4gIH1cbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLl9hdXRob3JpemF0aW9uID0gY29uZmlnLmF1dGhvcml6YXRpb247XG4gICAgdGhpcy5fY29ob3J0ID0gY29uZmlnLmNvaG9ydDtcbiAgICB0aGlzLl9iYXNldXJsID0gY29uZmlnLmJhc2V1cmw7XG4gIH1cblxuICBfaGFuZGxlUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRVc2VySW5mb0FwaSgpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZXVybH0ke3RoaXMuX2NvaG9ydH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZXVybH0ke3RoaXMuX2NvaG9ydH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG4gIHVwZGF0ZVVzZXJJbmZvKG5hbWVJbnB1dFZhbHVlLCB0aXRsZUlucHV0VmFsdWUpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZXVybH0ke3RoaXMuX2NvaG9ydH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lSW5wdXRWYWx1ZSxcbiAgICAgICAgYWJvdXQ6IHRpdGxlSW5wdXRWYWx1ZSxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG4gIGFkZE5ld0NhcmQoY2FyZElucHV0RGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNldXJsfSR7dGhpcy5fY29ob3J0fS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogY2FyZElucHV0RGF0YS5jYXJkbmFtZSxcbiAgICAgICAgbGluazogY2FyZElucHV0RGF0YS5saW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBjaGFuZ2VDYXJkTGlrZVN0YXR1cyhjYXJkSWQsIGlzTGlrZWQpIHtcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNldXJsfSR7dGhpcy5fY29ob3J0fS9jYXJkcy8ke2NhcmRJZH0vbGlrZXNgLCB7XG4gICAgICAgIG1ldGhvZDogaXNMaWtlZCA/ICdQVVQnIDogJ0RFTEVURScsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgICB9LFxuICAgICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVQb3N0KGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNldXJsfSR7dGhpcy5fY29ob3J0fS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICB9LFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG4gIHVwZGF0ZUF2YXRhcih1cmxJbWFnZSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNldXJsfSR7dGhpcy5fY29ob3J0fS91c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBhdmF0YXI6IHVybEltYWdlLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuY29uc3QgYnV0dG9uQWRkUGhvdG8gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbl90eXBlX2FkZFwiKTtcbmNvbnN0IGJ1dHRvbkVkaXRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b25fdHlwZV9lZGl0XCIpO1xuY29uc3QgYnV0dG9uQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5jb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIuZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19zYXZlLWJ1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19zYXZlLWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlXCIsXG59O1xuXG5jb25zdCBmb3JtVmFsaWRhdG9ycyA9IHt9O1xuXG5jb25zdCBlbmFibGVWYWxpZGF0aW9uID0gKGNvbmZpZykgPT4ge1xuICBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuZm9ybVNlbGVjdG9yKSk7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gICAgY29uc3QgdmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtRWxlbWVudCk7XG4gICAgZm9ybVZhbGlkYXRvcnNbZm9ybUVsZW1lbnQubmFtZV0gPSB2YWxpZGF0b3I7XG4gICAgdmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbiAgfSk7XG59O1xuXG5lbmFibGVWYWxpZGF0aW9uKGNvbmZpZyk7XG5cbmxldCB1c2VySWQ7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBhdXRob3JpemF0aW9uOiBcImQ5NGU3Y2YxLTM3NjEtNDViNi05Nzk4LTBhZDFkYThmMjg1OFwiLFxuICBjb2hvcnQ6IFwiY29ob3J0LTQyXCIsXG4gIGJhc2V1cmw6IFwiaHR0cHM6Ly9ub21vcmVwYXJ0aWVzLmNvL3YxL1wiLFxufSk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFxuICBcIi5wcm9maWxlX19uYW1lXCIsXG4gIFwiLnByb2ZpbGVfX3RpdGxlXCIsXG4gIFwiLnByb2ZpbGVfX2F2YXRhclwiXG4pO1xuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvQXBpKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbZGF0YSwgY2FyZHNdKSA9PiB7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lSW5wdXQ6IGRhdGEubmFtZSwgam9iSW5wdXQ6IGRhdGEuYWJvdXQgfSk7XG4gICAgdXNlcklkID0gZGF0YS5faWQ7XG4gICAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKGNhcmRzKTtcbiAgfSlcbiAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpO1xuXG5jb25zdCBjYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIHJlbmRlcmVyOiAoY2FyZEl0ZW0pID0+IHtcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZEl0ZW0pKTtcbiAgICB9LFxuICB9LFxuICBcIi5lbGVtZW50c1wiXG4pO1xuXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cC1mdWxsc2NyZWVuXCIpO1xuY29uc3QgaGFuZGxlRnVsbHNjcmVlbkNsaWNrID0gKGNhcmRJdGVtKSA9PiB7XG4gIHBvcHVwV2l0aEltYWdlLm9wZW4oY2FyZEl0ZW0pO1xufTtcblxuY29uc3QgcG9wdXBXaXRoQ29uZmlybWF0aW9uID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihcIi5wb3B1cF9wbGFjZV9jb25maXJtXCIpO1xuXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmRJdGVtKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICB7XG4gICAgICBoYW5kbGVDYXJkQ2xpY2s6IGhhbmRsZUZ1bGxzY3JlZW5DbGljayxcbiAgICAgIGhhbmRsZURlbGV0ZUNsaWNrOiAoY2FyZEl0ZW0pID0+IHtcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLnJlbmRlckxvYWRpbmcoXCLQlNCwXCIpO1xuICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24uc2V0U3VibWl0SGFuZGxlcigoKSA9PiB7XG4gICAgICAgICAgYXBpXG4gICAgICAgICAgICAuZGVsZXRlUG9zdChjYXJkSXRlbS5fY2FyZEl0ZW0uX2lkKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICAgICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5jbG9zZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgICAgICAgICAgLmZpbmFsbHkocG9wdXBXaXRoQ29uZmlybWF0aW9uLnJlbmRlckxvYWRpbmcoXCLQo9C00LDQu9C10L3QuNC1Li4uXCIpKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5vcGVuKCk7XG4gICAgICB9LFxuICAgICAgaGFuZGxlVG9nZ2xlTGlrZTogKGNhcmQsIGNhcmRJZCkgPT4ge1xuICAgICAgICBhcGlcbiAgICAgICAgICAuY2hhbmdlQ2FyZExpa2VTdGF0dXMoY2FyZElkLCAhY2FyZC5pc0xpa2VkKCkpXG4gICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiYW5kbGVUb2dnbGVMaWtlQ2xpY2tcIiwgZGF0YSk7XG4gICAgICAgICAgICBjYXJkLnN0YXR1c2xpa2V0b2dnbGUoZGF0YSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG4gICAgICB9LFxuICAgIH0sXG4gICAgY2FyZEl0ZW0sXG4gICAgXCIuZWxlbWVudC10ZW1wbGF0ZV9kZWZhdWx0XCIsXG4gICAgdXNlcklkXG4gICk7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5jb25zdCBmb3JtQWRkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgXCIucG9wdXBfcGxhY2VfYWRkLXBob3RvXCIsXG4gIGZvcm1WYWxpZGF0b3JzW1wicG9wdXAtYWRkLXBob3RvXCJdLFxuICAoY2FyZElucHV0RGF0YSkgPT4ge1xuICAgIGFwaVxuICAgICAgLmFkZE5ld0NhcmQoY2FyZElucHV0RGF0YSlcbiAgICAgIC50aGVuKChjYXJkKSA9PiB7XG4gICAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZUNhcmQoY2FyZCkpO1xuICAgICAgICBmb3JtQWRkUG9wdXAuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgZm9ybUFkZFBvcHVwLnJlbmRlckxvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gICAgICB9KTtcbiAgfVxuKTtcblxuY29uc3QgZm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF9wbGFjZV9hdmF0YXJcIixcbiAgZm9ybVZhbGlkYXRvcnNbXCJwb3B1cC1hdmF0YXJcIl0sXG4gICh1cmxJbWFnZSkgPT4ge1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcih1cmxJbWFnZS5saW5rKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICAgIGZvcm1BdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcItCe0YjQuNCx0LrQsC4g0JfQsNC/0YDQvtGBINC90LUg0LLRi9C/0L7Qu9C90LXQvTogXCIsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBmb3JtQXZhdGFyLnJlbmRlckxvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gICAgICB9KTtcbiAgfVxuKTtcblxuY29uc3QgZm9ybUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF9wbGFjZV9lZGl0LXByb2ZpbGVcIixcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtLXByb2ZpbGVcIl0sXG4gICh1c2VySW5wdXREYXRhKSA9PiB7XG4gICAgY29uc3QgdXNlckluZm9VcGRhdGUgPSBhcGlcbiAgICAgIC51cGRhdGVVc2VySW5mbyh1c2VySW5wdXREYXRhLmZ1bGxuYW1lLCB1c2VySW5wdXREYXRhLmpvYnRpdGxlKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgbmFtZUlucHV0OiB1c2VySW5wdXREYXRhLmZ1bGxuYW1lLFxuICAgICAgICAgIGpvYklucHV0OiB1c2VySW5wdXREYXRhLmpvYnRpdGxlLFxuICAgICAgICB9KTtcbiAgICAgICAgZm9ybUVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgdXNlckluZm9VcGRhdGVcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi0J7RiNC40LHQutCwLiDQl9Cw0L/RgNC+0YEg0L3QtSDQstGL0L/QvtC70L3QtdC9OiBcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGZvcm1FZGl0UG9wdXAucmVuZGVyTG9hZGluZygn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKTtcbiAgICAgIH0pO1xuICB9XG4pO1xuXG5mb3JtQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5mb3JtRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmZvcm1BZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtLXByb2ZpbGVcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZvcm1FZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIGZvcm1FZGl0UG9wdXAucmVuZGVyTG9hZGluZygn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gIGZvcm1FZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmJ1dHRvbkFkZFBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wicG9wdXAtYWRkLXBob3RvXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBmb3JtQWRkUG9wdXAucmVuZGVyTG9hZGluZygn0KHQvtC30LTQsNGC0YwnKTtcbiAgZm9ybUFkZFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5idXR0b25BdmF0YXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJwb3B1cC1hdmF0YXJcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZvcm1BdmF0YXIucmVuZGVyTG9hZGluZygn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gIGZvcm1BdmF0YXIub3BlbigpO1xufSk7XG4iXSwibmFtZXMiOlsiQ2FyZCIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJ1c2VySWQiLCJoYW5kbGVDYXJkQ2xpY2siLCJoYW5kbGVEZWxldGVDbGljayIsImhhbmRsZVRvZ2dsZUxpa2UiLCJ0aGlzIiwiX2NhcmRJdGVtIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfbGlrZXMiLCJsaWtlcyIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX3RyYXNoQnV0dG9uRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJfYnV0dG9uTGlrZUVsZW1lbnQiLCJfY291bnRMaWtlRWxlbSIsIl9pbWFnZUVsZW0iLCJfY2FwdGlvbkVsZW0iLCJfaGFuZGxlRGVsZXRlIiwiX2hhbmRsZVRvZ2dsZUxpa2UiLCJfdXNlcklkIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwic3JjIiwibGluayIsImFsdCIsIm5hbWUiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsIm93bmVyIiwiX2lkIiwiY2xhc3NMaXN0IiwiYWRkIiwiaXNMaWtlZCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRnVsbHNjcmVlbiIsIkJvb2xlYW4iLCJmaW5kIiwiaXRlbSIsInJlbW92ZSIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9idXR0b25FbGVtZW50IiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JtSW5wdXQiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJlcnJvck1lc3NhZ2UiLCJmb3JtRXJyb3IiLCJpZCIsInNvbWUiLCJpbnB1dEVsZW1lbnQiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZUJ1dHRvbiIsImFjdGl2YXRlQnV0dG9uIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJyZXNldCIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImNhcmRJdGVtcyIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwIiwiX2Zvcm0iLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsIndoaWNoIiwiYWN0aXZlUG9wdXAiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfZnVsbHNjcmVlbkltYWdlIiwiX2Z1bGxzY3JlZW5DYXB0aW9uIiwiY2FyZEl0ZW0iLCJQb3B1cFdpdGhGb3JtIiwiZm9ybVZhbGlkYXRvciIsImZvcm1TdWJtaXQiLCJfZm9ybVN1Ym1pdCIsIl9mb3JtVmFsaWRhdG9yIiwicmVzZXRWYWxpZGF0aW9uIiwiX3N1Ym1pdEJ1dHRvbiIsInRleHQiLCJfaW5wdXRWYWx1ZXMiLCJpbnB1dEl0ZW0iLCJ2YWx1ZSIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiY29sbGJhY2siLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZnVsbG5hbWUiLCJqb2J0aXRsZSIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiYXZhdGFyVVJMIiwiQXBpIiwiX2F1dGhvcml6YXRpb24iLCJhdXRob3JpemF0aW9uIiwiX2NvaG9ydCIsImNvaG9ydCIsIl9iYXNldXJsIiwiYmFzZXVybCIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJmZXRjaCIsImhlYWRlcnMiLCJ0aGVuIiwiX2hhbmRsZVJlc3BvbnNlIiwibmFtZUlucHV0VmFsdWUiLCJ0aXRsZUlucHV0VmFsdWUiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiY2FyZElucHV0RGF0YSIsImNhcmRuYW1lIiwiY2FyZElkIiwidXJsSW1hZ2UiLCJhdmF0YXIiLCJidXR0b25BZGRQaG90byIsImJ1dHRvbkVkaXRQcm9maWxlIiwiYnV0dG9uQXZhdGFyIiwiZm9ybVZhbGlkYXRvcnMiLCJmb3JtU2VsZWN0b3IiLCJ2YWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwiYXBpIiwidXNlckluZm8iLCJhbGwiLCJnZXRVc2VySW5mb0FwaSIsImdldEluaXRpYWxDYXJkcyIsImNhcmRzIiwic2V0VXNlckF2YXRhciIsInNldFVzZXJJbmZvIiwiY2FyZHNMaXN0IiwicmVuZGVySXRlbXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInBvcHVwV2l0aEltYWdlIiwiaGFuZGxlRnVsbHNjcmVlbkNsaWNrIiwib3BlbiIsInBvcHVwV2l0aENvbmZpcm1hdGlvbiIsImNhcmQiLCJyZW5kZXJMb2FkaW5nIiwic2V0U3VibWl0SGFuZGxlciIsImRlbGV0ZVBvc3QiLCJkZWxldGVDYXJkIiwiZmluYWxseSIsImNoYW5nZUNhcmRMaWtlU3RhdHVzIiwic3RhdHVzbGlrZXRvZ2dsZSIsImdlbmVyYXRlQ2FyZCIsImZvcm1BZGRQb3B1cCIsImFkZE5ld0NhcmQiLCJmb3JtQXZhdGFyIiwidXBkYXRlQXZhdGFyIiwiZm9ybUVkaXRQb3B1cCIsInVzZXJJbnB1dERhdGEiLCJ1cGRhdGVVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwic2V0SW5wdXRWYWx1ZXMiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=