(()=>{"use strict";function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var e=function(){function e(t,n,r,o){var i=t.handleCardClick,a=t.handleDeleteClick,u=t.handleToggleLike;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this._cardItem=n,this._handleCardClick=i,this._cardSelector=r,this._likes=n.likes,this._element=this._getTemplate(),this._trashButtonElement=this._element.querySelector(".elements__button_trash"),this._buttonLikeElement=this._element.querySelector(".elements__button_like"),this._countLikeElem=this._element.querySelector(".elements__info_like-count"),this._imageElem=this._element.querySelector(".elements__image"),this._captionElem=this._element.querySelector(".elements__caption"),this._handleDelete=a,this._handleToggleLike=u,this._userId=o}var n,r;return n=e,(r=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".elements__element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._imageElem.src=this._cardItem.link,this._imageElem.alt=this._cardItem.name,this._captionElem.textContent=this._cardItem.name,this._countLikeElem.textContent=this._likes.length,this._setEventListeners(),this._cardItem.owner._id!=this._userId&&this._trashButtonElement.classList.add("elements__button_trash_hidden"),this.isLiked()&&this._buttonLikeElement.classList.add("elements__button_like_active"),this._element}},{key:"_handleFullscreen",value:function(){this._handleCardClick(this._cardItem)}},{key:"_setEventListeners",value:function(){var t=this;this._buttonLikeElement.addEventListener("click",(function(){t._handleToggleLike(t,t._cardItem._id)})),this._trashButtonElement.addEventListener("click",(function(){t._handleDelete(t,t._cardItem,t._element)})),this._imageElem.addEventListener("click",(function(){t._handleFullscreen()}))}},{key:"isLiked",value:function(){var t=this;return Boolean(this._likes.find((function(e){return e._id===t._userId})))}},{key:"statusliketoggle",value:function(t){this._countLikeElem.textContent=t.likes.length,this.isLiked()?this._buttonLikeElement.classList.remove("elements__button_like_active"):this._buttonLikeElement.classList.add("elements__button_like_active"),this._likes=t.likes}},{key:"deleteCard",value:function(){this._element.remove()}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var r=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._formElement=n,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector))}var e,r;return e=t,(r=[{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t,t.validationMessage)}},{key:"_showInputError",value:function(t,e){var n=this._formElement.querySelector(".".concat(t.id,"-error"));n.textContent=e,n.classList.add(this._errorClass),t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector(".".concat(t.id,"-error"));null!=e&&(t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent="")}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInvalidInput()?this.disableButton():this.activateButton()}},{key:"_setEventListeners",value:function(){var t=this;this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"resetValidation",value:function(){var t=this;this._inputList.forEach((function(e){t._hideInputError(e)})),this._toggleButtonState(),this._formElement.reset()}},{key:"disableButton",value:function(){this._buttonElement.setAttribute("disabled","disabled"),this._buttonElement.classList.add(this._inactiveButtonClass)}},{key:"activateButton",value:function(){this._buttonElement.removeAttribute("disabled","disabled"),this._buttonElement.classList.remove(this._inactiveButtonClass)}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&n(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n){var r=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._renderer=r,this._container=document.querySelector(n)}var e,n;return e=t,(n=[{key:"renderItems",value:function(t){var e=this;t.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(t){this._container.prepend(t)}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._form=this._popup.querySelector(".form"),this._handleEscClose=this._handleEscClose.bind(this)}var e,n;return e=t,(n=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){if(27===t.which){var e=document.querySelector(".popup_opened");this.close(e)}}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",(function(e){(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&t.close()}))}}])&&a(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=f(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},s.apply(this,arguments)}function f(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=d(t)););return t}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function d(t){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},d(t)}var _=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=d(r);if(o){var n=d(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return h(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._fullscreenImage=e._popup.querySelector(".popup-fullscreen__image"),e._fullscreenCaption=e._popup.querySelector(".popup-fullscreen__caption"),e}return e=a,(n=[{key:"open",value:function(t){this._fullscreenImage.src=t.link,this._fullscreenCaption.textContent=t.name,this._fullscreenImage.alt=t.name,s(d(a.prototype),"open",this).call(this)}}])&&l(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}function m(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=b(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},v.apply(this,arguments)}function b(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E(t)););return t}function g(t,e){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},g(t,e)}function k(t,e){if(e&&("object"===y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&g(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=E(r);if(o){var n=E(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return k(this,t)});function a(t,e,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t))._formSubmit=n,r._inputList=r._popup.querySelectorAll(".popup__input"),r._formValidator=e,r._formValidator.resetValidation(),r._submitButton=r._form.querySelector(".popup__save-button"),r}return e=a,(n=[{key:"renderLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"_getInputValues",value:function(){var t=this;return this._inputValues={},this._inputList.forEach((function(e){t._inputValues[e.name]=e.value})),this._inputValues}},{key:"setInputValues",value:function(t){this._inputList.forEach((function(e){e.value=t[e.name].textContent}))}},{key:"close",value:function(){v(E(a.prototype),"close",this).call(this),this._form.reset()}},{key:"setEventListeners",value:function(){var t=this;v(E(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit(t._getInputValues())}))}}])&&m(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=C(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},O.apply(this,arguments)}function C(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=P(t)););return t}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function I(t,e){if(e&&("object"===L(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}var R=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(a,t);var e,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=P(r);if(o){var n=P(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return I(this,t)});function a(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.call(this,t))._submitButton=e._form.querySelector(".popup__save-button"),e}return e=a,(n=[{key:"renderLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"visualizeLoading",value:function(t){this._submitButton.textContent="".concat(t)}},{key:"setSubmitHandler",value:function(t){this._formSubmit=t}},{key:"setEventListeners",value:function(){var t=this;O(P(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(e){e.preventDefault(),t._formSubmit()}))}}])&&S(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),a}(u);function T(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var B=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(e),this._jobElement=document.querySelector(n),this._avatarElement=document.querySelector(r)}var e,n;return e=t,(n=[{key:"getUserInfo",value:function(){return{fullname:this._nameElement,jobtitle:this._jobElement}}},{key:"setUserInfo",value:function(t){var e=t.nameInput,n=t.jobInput;this._nameElement.textContent=e,this._jobElement.textContent=n}},{key:"setUserAvatar",value:function(t){this._avatarElement.src=t}}])&&T(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var A=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._authorization=e.authorization,this._cohort=e.cohort,this._baseurl=e.baseurl}var e,n;return e=t,(n=[{key:"_handleResponse",value:function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}},{key:"getUserInfoApi",value:function(){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards"),{headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"updateUserInfo",value:function(t,e){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t,about:e})}).then(this._handleResponse)}},{key:"addNewCard",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards"),{method:"POST",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({name:t.cardname,link:t.link})}).then(this._handleResponse)}},{key:"changeCardLikeStatus",value:function(t,e){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards/").concat(t,"/likes"),{method:e?"PUT":"DELETE",headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"deletePost",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._authorization}}).then(this._handleResponse)}},{key:"updateAvatar",value:function(t){return fetch("".concat(this._baseurl).concat(this._cohort,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._authorization,"Content-Type":"application/json"},body:JSON.stringify({avatar:t})}).then(this._handleResponse)}}])&&q(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var z,V,D=document.querySelector(".profile__button_type_add"),U=document.querySelector(".profile__button_type_edit"),N=document.querySelector(".profile__avatar"),H={};V={formSelector:".form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__input-error_active"},Array.from(document.querySelectorAll(V.formSelector)).forEach((function(t){var e=new r(V,t);H[t.name]=e,e.enableValidation()}));var J=new A({authorization:"d94e7cf1-3761-45b6-9798-0ad1da8f2858",cohort:"cohort-42",baseurl:"https://nomoreparties.co/v1/"}),F=new B(".profile__name",".profile__title",".profile__avatar");Promise.all([J.getUserInfoApi(),J.getInitialCards()]).then((function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i=[],a=!0,u=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(i.push(r.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==n.return||n.return()}finally{if(u)throw o}}return i}}(e,n)||function(t,e){if(t){if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];F.setUserAvatar(o.avatar),F.setUserInfo({nameInput:o.name,jobInput:o.about}),z=o._id,M.renderItems(i)})).catch((function(t){return console.log(t)}));var M=new i({renderer:function(t){M.addItem(Q(t))}},".elements"),$=new _(".popup-fullscreen"),G=function(t){$.open(t)},K=new R(".popup_place_confirm");function Q(t){var n=new e({handleCardClick:G,handleDeleteClick:function(t){K.renderLoading("Да"),K.setSubmitHandler((function(){J.deletePost(t._cardItem._id).then((function(t){n.deleteCard(),K.close()})).catch((function(t){return console.log(t)})).finally(K.renderLoading("Удаление..."))})),K.open()},handleToggleLike:function(t,e){J.changeCardLikeStatus(e,!t.isLiked()).then((function(e){console.log("andleToggleLikeClick",e),t.statusliketoggle(e)})).catch((function(t){return console.log(t)}))}},t,".element-template_default",z);return n.generateCard()}var W=new w(".popup_place_add-photo",H["popup-add-photo"],(function(t){W.renderLoading("Сохранение..."),J.addNewCard(t).then((function(t){M.addItem(Q(t)),W.close()})).catch((function(t){console.log(t)})).finally((function(){W.renderLoading("Создать")}))})),X=new w(".popup_place_avatar",H["popup-avatar"],(function(t){X.renderLoading("Сохранение..."),J.updateAvatar(t.link).then((function(t){F.setUserAvatar(t.avatar),X.close()})).catch((function(t){console.log("Ошибка. Запрос не выполнен: ",t)})).finally((function(){X.renderLoading("Сохранить")}))})),Y=new w(".popup_place_edit-profile",H["form-profile"],(function(t){Y.renderLoading("Сохранение..."),J.updateUserInfo(t.fullname,t.jobtitle).then((function(){F.setUserInfo({nameInput:t.fullname,jobInput:t.jobtitle}),Y.close()})).catch((function(t){console.log("Ошибка. Запрос не выполнен: ",t)})).finally((function(){Y.renderLoading("Сохранить")}))}));X.setEventListeners(),Y.setEventListeners(),K.setEventListeners(),W.setEventListeners(),$.setEventListeners(),U.addEventListener("click",(function(){H["form-profile"].resetValidation(),Y.setInputValues(F.getUserInfo()),Y.open()})),D.addEventListener("click",(function(){H["popup-add-photo"].resetValidation(),W.open()})),N.addEventListener("click",(function(){H["popup-avatar"].resetValidation(),X.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVNxQyxlQUN0Q0wsRUFBY2YsVUFHaEJ6QixFQUFlOUgsaUJBQWlCLFNBQVMsV0FDdkNpSSxFQUFlLG1CQUFtQnRELGtCQUNsQ3VGLEVBQWFYLFVBR2Z2QixFQUFhaEksaUJBQWlCLFNBQVMsV0FDckNpSSxFQUFlLGdCQUFnQnRELGtCQUMvQnlGLEVBQVdiLFciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9uYWR5YS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL25hZHlhLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbmFkeWEvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZVRvZ2dsZUxpa2UgfSxcbiAgICBkYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICB1c2VySWRcbiAgKSB7XG4gICAgdGhpcy5fY2FyZEl0ZW0gPSBkYXRhO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRzX19idXR0b25fdHJhc2hcIlxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uTGlrZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5lbGVtZW50c19fYnV0dG9uX2xpa2VcIlxuICAgICk7XG4gICAgdGhpcy5fY291bnRMaWtlRWxlbSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLmVsZW1lbnRzX19pbmZvX2xpa2UtY291bnRcIlxuICAgICk7XG4gICAgdGhpcy5faW1hZ2VFbGVtID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRzX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXB0aW9uRWxlbSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fY2FwdGlvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVEZWxldGUgPSBoYW5kbGVEZWxldGVDbGljaztcbiAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlID0gaGFuZGxlVG9nZ2xlTGlrZTtcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50c19fZWxlbWVudFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XG4gIH1cblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5faW1hZ2VFbGVtLnNyYyA9IHRoaXMuX2NhcmRJdGVtLmxpbms7XG4gICAgdGhpcy5faW1hZ2VFbGVtLmFsdCA9IHRoaXMuX2NhcmRJdGVtLm5hbWU7XG4gICAgdGhpcy5fY2FwdGlvbkVsZW0udGV4dENvbnRlbnQgPSB0aGlzLl9jYXJkSXRlbS5uYW1lO1xuICAgIHRoaXMuX2NvdW50TGlrZUVsZW0udGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICBpZiAodGhpcy5fY2FyZEl0ZW0ub3duZXIuX2lkICE9IHRoaXMuX3VzZXJJZCkge1xuICAgICAgdGhpcy5fdHJhc2hCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJlbGVtZW50c19fYnV0dG9uX3RyYXNoX2hpZGRlblwiKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKVxuICAgICAgdGhpcy5fYnV0dG9uTGlrZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19idXR0b25fbGlrZV9hY3RpdmVcIik7XG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH1cblxuICBfaGFuZGxlRnVsbHNjcmVlbigpIHtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fY2FyZEl0ZW0pO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2J1dHRvbkxpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVUb2dnbGVMaWtlKHRoaXMsIHRoaXMuX2NhcmRJdGVtLl9pZCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl90cmFzaEJ1dHRvbkVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZSh0aGlzLCB0aGlzLl9jYXJkSXRlbSwgdGhpcy5fZWxlbWVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9pbWFnZUVsZW0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUZ1bGxzY3JlZW4oKTtcbiAgICB9KTtcbiAgfVxuXG4gIGlzTGlrZWQoKSB7XG4gICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fbGlrZXMuZmluZCgoaXRlbSkgPT4gaXRlbS5faWQgPT09IHRoaXMuX3VzZXJJZCkpO1xuICB9XG4gIHN0YXR1c2xpa2V0b2dnbGUoZGF0YSkge1xuICAgIHRoaXMuX2NvdW50TGlrZUVsZW0udGV4dENvbnRlbnQgPSBkYXRhLmxpa2VzLmxlbmd0aDtcbiAgICBpZiAoIXRoaXMuaXNMaWtlZCgpKVxuICAgICAgdGhpcy5fYnV0dG9uTGlrZUVsZW1lbnQuY2xhc3NMaXN0LmFkZChcImVsZW1lbnRzX19idXR0b25fbGlrZV9hY3RpdmVcIik7XG4gICAgZWxzZVxuICAgICAgdGhpcy5fYnV0dG9uTGlrZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImVsZW1lbnRzX19idXR0b25fbGlrZV9hY3RpdmVcIik7XG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xuICB9XG5cbiAgZGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gIH1cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGZvcm1JbnB1dCkge1xuICAgIGlmICghZm9ybUlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihmb3JtSW5wdXQsIGZvcm1JbnB1dC52YWxpZGF0aW9uTWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGZvcm1JbnB1dCk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGZvcm1JbnB1dCwgZXJyb3JNZXNzYWdlKSB7XG4gICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7Zm9ybUlucHV0LmlkfS1lcnJvcmApOyBcbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XG4gICAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XG4gICAgZm9ybUlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihmb3JtSW5wdXQpIHtcbiAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtmb3JtSW5wdXQuaWR9LWVycm9yYCk7IFxuICAgIGlmIChmb3JtRXJyb3IgIT0gbnVsbCkge1xuICAgICAgZm9ybUlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9XG4gIH1cblxuICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICB9KTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmFjdGl2YXRlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICB9XG5cbiAgYWN0aXZhdGVCdXR0b24oKSB7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoY2FyZEl0ZW1zKSB7XG4gICAgY2FyZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcbiAgXG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgY29uc3QgRVNDX0tFWUNPREUgPSAyNztcbiAgICBpZiAoZXZ0LndoaWNoID09PSBFU0NfS0VZQ09ERSkge1xuICAgICAgY29uc3QgYWN0aXZlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX29wZW5lZFwiKTtcbiAgICAgIHRoaXMuY2xvc2UoYWN0aXZlUG9wdXApO1xuICAgIH1cbiAgfVxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2dCkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInBvcHVwXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpXG4gICAgICApIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fZnVsbHNjcmVlbkltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwLWZ1bGxzY3JlZW5fX2ltYWdlXCJcbiAgICApO1xuICAgIHRoaXMuX2Z1bGxzY3JlZW5DYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnBvcHVwLWZ1bGxzY3JlZW5fX2NhcHRpb25cIlxuICAgICk7XG4gIH1cbiAgb3BlbihjYXJkSXRlbSkge1xuICAgIHRoaXMuX2Z1bGxzY3JlZW5JbWFnZS5zcmMgPSBjYXJkSXRlbS5saW5rO1xuICAgIHRoaXMuX2Z1bGxzY3JlZW5DYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZEl0ZW0ubmFtZTtcbiAgICB0aGlzLl9mdWxsc2NyZWVuSW1hZ2UuYWx0ID0gY2FyZEl0ZW0ubmFtZTtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGZvcm1WYWxpZGF0b3IsIGZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9mb3JtU3VibWl0ID0gZm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKFwiLnBvcHVwX19pbnB1dFwiKTtcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yID0gZm9ybVZhbGlkYXRvcjtcbiAgICB0aGlzLl9mb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ1dHRvbicpO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGV4dH1gO1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0VmFsdWVzID0ge307XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0SXRlbSkgPT4ge1xuICAgICAgdGhpcy5faW5wdXRWYWx1ZXNbaW5wdXRJdGVtLm5hbWVdID0gaW5wdXRJdGVtLnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGRhdGEpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQudmFsdWUgPSBkYXRhW2lucHV0RWxlbWVudC5uYW1lXS50ZXh0Q29udGVudDtcbiAgICB9KTtcbiAgfSBcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIpO1xuICB9XG5cbiAgcmVuZGVyTG9hZGluZyh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGV4dH1gO1xuICB9XG5cbiAgdmlzdWFsaXplTG9hZGluZyh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gYCR7dGV4dH1gO1xuICB9XG5cbiAgc2V0U3VibWl0SGFuZGxlcihjb2xsYmFjaykge1xuICAgIHRoaXMuX2Zvcm1TdWJtaXQgPSBjb2xsYmFjaztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5fZm9ybVN1Ym1pdCgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGF2YXRhclNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioam9iU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGF2YXRhclNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4geyBmdWxsbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQsIGpvYnRpdGxlOiB0aGlzLl9qb2JFbGVtZW50IH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWVJbnB1dCwgam9iSW5wdXQgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZUlucHV0O1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2JJbnB1dDtcbiAgfVxuICBzZXRVc2VyQXZhdGFyKGF2YXRhclVSTCkge1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyVVJMO1xuICB9XG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoY29uZmlnKSB7XG4gICAgdGhpcy5fYXV0aG9yaXphdGlvbiA9IGNvbmZpZy5hdXRob3JpemF0aW9uO1xuICAgIHRoaXMuX2NvaG9ydCA9IGNvbmZpZy5jb2hvcnQ7XG4gICAgdGhpcy5fYmFzZXVybCA9IGNvbmZpZy5iYXNldXJsO1xuICB9XG5cbiAgX2hhbmRsZVJlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgZ2V0VXNlckluZm9BcGkoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L2NhcmRzYCwge1xuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuICB1cGRhdGVVc2VySW5mbyhuYW1lSW5wdXRWYWx1ZSwgdGl0bGVJbnB1dFZhbHVlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIGF1dGhvcml6YXRpb246IHRoaXMuX2F1dGhvcml6YXRpb24sXG4gICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogbmFtZUlucHV0VmFsdWUsXG4gICAgICAgIGFib3V0OiB0aXRsZUlucHV0VmFsdWUsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuICBhZGROZXdDYXJkKGNhcmRJbnB1dERhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZXVybH0ke3RoaXMuX2NvaG9ydH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmRJbnB1dERhdGEuY2FyZG5hbWUsXG4gICAgICAgIGxpbms6IGNhcmRJbnB1dERhdGEubGluayxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5faGFuZGxlUmVzcG9uc2UpO1xuICB9XG5cbiAgY2hhbmdlQ2FyZExpa2VTdGF0dXMoY2FyZElkLCBpc0xpa2VkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogaXNMaWtlZCA/IFwiUFVUXCIgOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgfSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxuXG4gIGRlbGV0ZVBvc3QoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L2NhcmRzLyR7Y2FyZElkfWAsIHtcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogdGhpcy5fYXV0aG9yaXphdGlvbixcbiAgICAgIH0sXG4gICAgfSkudGhlbih0aGlzLl9oYW5kbGVSZXNwb25zZSk7XG4gIH1cbiAgdXBkYXRlQXZhdGFyKHVybEltYWdlKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2V1cmx9JHt0aGlzLl9jb2hvcnR9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICBhdXRob3JpemF0aW9uOiB0aGlzLl9hdXRob3JpemF0aW9uLFxuICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgIH0sXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogdXJsSW1hZ2UsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKHRoaXMuX2hhbmRsZVJlc3BvbnNlKTtcbiAgfVxufVxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcbmltcG9ydCB7IENhcmQgfSBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XG5jb25zdCBidXR0b25BZGRQaG90byA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uX3R5cGVfYWRkXCIpO1xuY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvbl90eXBlX2VkaXRcIik7XG5jb25zdCBidXR0b25BdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcbmNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwicG9wdXBfX3NhdmUtYnV0dG9uX2Rpc2FibGVkXCIsXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5cbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XG5cbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XG4gIGNvbnN0IGZvcm1MaXN0ID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpKTtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICBmb3JtVmFsaWRhdG9yc1tmb3JtRWxlbWVudC5uYW1lXSA9IHZhbGlkYXRvcjtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oY29uZmlnKTtcblxubGV0IHVzZXJJZDtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGF1dGhvcml6YXRpb246IFwiZDk0ZTdjZjEtMzc2MS00NWI2LTk3OTgtMGFkMWRhOGYyODU4XCIsXG4gIGNvaG9ydDogXCJjb2hvcnQtNDJcIixcbiAgYmFzZXVybDogXCJodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvXCIsXG59KTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oXG4gIFwiLnByb2ZpbGVfX25hbWVcIixcbiAgXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgXCIucHJvZmlsZV9fYXZhdGFyXCJcbik7XG5cblByb21pc2UuYWxsKFthcGkuZ2V0VXNlckluZm9BcGkoKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFtkYXRhLCBjYXJkc10pID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKGRhdGEuYXZhdGFyKTtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWVJbnB1dDogZGF0YS5uYW1lLCBqb2JJbnB1dDogZGF0YS5hYm91dCB9KTtcbiAgICB1c2VySWQgPSBkYXRhLl9pZDtcbiAgICBjYXJkc0xpc3QucmVuZGVySXRlbXMoY2FyZHMpO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4gY29uc29sZS5sb2coZXJyKSk7XG5cbmNvbnN0IGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKFxuICB7XG4gICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xuICAgICAgY2FyZHNMaXN0LmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkSXRlbSkpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmVsZW1lbnRzXCJcbik7XG5cbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwLWZ1bGxzY3JlZW5cIik7XG5jb25zdCBoYW5kbGVGdWxsc2NyZWVuQ2xpY2sgPSAoY2FyZEl0ZW0pID0+IHtcbiAgcG9wdXBXaXRoSW1hZ2Uub3BlbihjYXJkSXRlbSk7XG59O1xuXG5jb25zdCBwb3B1cFdpdGhDb25maXJtYXRpb24gPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFwiLnBvcHVwX3BsYWNlX2NvbmZpcm1cIik7XG5cbmZ1bmN0aW9uIGNyZWF0ZUNhcmQoY2FyZEl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxuICAgIHtcbiAgICAgIGhhbmRsZUNhcmRDbGljazogaGFuZGxlRnVsbHNjcmVlbkNsaWNrLFxuICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChjYXJkSXRlbSkgPT4ge1xuICAgICAgICBwb3B1cFdpdGhDb25maXJtYXRpb24ucmVuZGVyTG9hZGluZyhcItCU0LBcIik7XG4gICAgICAgIHBvcHVwV2l0aENvbmZpcm1hdGlvbi5zZXRTdWJtaXRIYW5kbGVyKCgpID0+IHtcbiAgICAgICAgICBhcGlcbiAgICAgICAgICAgIC5kZWxldGVQb3N0KGNhcmRJdGVtLl9jYXJkSXRlbS5faWQpXG4gICAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcbiAgICAgICAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLmNsb3NlKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgICAgICAgICAuZmluYWxseShwb3B1cFdpdGhDb25maXJtYXRpb24ucmVuZGVyTG9hZGluZyhcItCj0LTQsNC70LXQvdC40LUuLi5cIikpO1xuICAgICAgICB9KTtcbiAgICAgICAgcG9wdXBXaXRoQ29uZmlybWF0aW9uLm9wZW4oKTtcbiAgICAgIH0sXG4gICAgICBoYW5kbGVUb2dnbGVMaWtlOiAoY2FyZCwgY2FyZElkKSA9PiB7XG4gICAgICAgIGFwaVxuICAgICAgICAgIC5jaGFuZ2VDYXJkTGlrZVN0YXR1cyhjYXJkSWQsICFjYXJkLmlzTGlrZWQoKSlcbiAgICAgICAgICAudGhlbigoZGF0YSkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJhbmRsZVRvZ2dsZUxpa2VDbGlja1wiLCBkYXRhKTtcbiAgICAgICAgICAgIGNhcmQuc3RhdHVzbGlrZXRvZ2dsZShkYXRhKTtcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBjYXJkSXRlbSxcbiAgICBcIi5lbGVtZW50LXRlbXBsYXRlX2RlZmF1bHRcIixcbiAgICB1c2VySWRcbiAgKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICByZXR1cm4gY2FyZEVsZW1lbnQ7XG59XG5cbmNvbnN0IGZvcm1BZGRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF9wbGFjZV9hZGQtcGhvdG9cIixcbiAgZm9ybVZhbGlkYXRvcnNbXCJwb3B1cC1hZGQtcGhvdG9cIl0sXG4gIChjYXJkSW5wdXREYXRhKSA9PiB7XG4gICAgZm9ybUFkZFBvcHVwLnJlbmRlckxvYWRpbmcoXCLQodC+0YXRgNCw0L3QtdC90LjQtS4uLlwiKTtcbiAgICBhcGlcbiAgICAgIC5hZGROZXdDYXJkKGNhcmRJbnB1dERhdGEpXG4gICAgICAudGhlbigoY2FyZCkgPT4ge1xuICAgICAgICBjYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVDYXJkKGNhcmQpKTtcbiAgICAgICAgZm9ybUFkZFBvcHVwLmNsb3NlKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGZvcm1BZGRQb3B1cC5yZW5kZXJMb2FkaW5nKFwi0KHQvtC30LTQsNGC0YxcIik7XG4gICAgICB9KTtcbiAgfVxuKTtcblxuY29uc3QgZm9ybUF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF9wbGFjZV9hdmF0YXJcIixcbiAgZm9ybVZhbGlkYXRvcnNbXCJwb3B1cC1hdmF0YXJcIl0sXG4gICh1cmxJbWFnZSkgPT4ge1xuICAgIGZvcm1BdmF0YXIucmVuZGVyTG9hZGluZyhcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCIpO1xuICAgIGFwaVxuICAgICAgLnVwZGF0ZUF2YXRhcih1cmxJbWFnZS5saW5rKVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhLmF2YXRhcik7XG4gICAgICAgIGZvcm1BdmF0YXIuY2xvc2UoKTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcItCe0YjQuNCx0LrQsC4g0JfQsNC/0YDQvtGBINC90LUg0LLRi9C/0L7Qu9C90LXQvTogXCIsIGVycik7XG4gICAgICB9KVxuICAgICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBmb3JtQXZhdGFyLnJlbmRlckxvYWRpbmcoXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XG4gICAgICB9KTtcbiAgfVxuKTtcblxuY29uc3QgZm9ybUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIi5wb3B1cF9wbGFjZV9lZGl0LXByb2ZpbGVcIixcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtLXByb2ZpbGVcIl0sXG4gICh1c2VySW5wdXREYXRhKSA9PiB7XG4gICAgZm9ybUVkaXRQb3B1cC5yZW5kZXJMb2FkaW5nKFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIik7XG4gICAgY29uc3QgdXNlckluZm9VcGRhdGUgPSBhcGlcbiAgICAgIC51cGRhdGVVc2VySW5mbyh1c2VySW5wdXREYXRhLmZ1bGxuYW1lLCB1c2VySW5wdXREYXRhLmpvYnRpdGxlKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgICAgICAgbmFtZUlucHV0OiB1c2VySW5wdXREYXRhLmZ1bGxuYW1lLFxuICAgICAgICAgIGpvYklucHV0OiB1c2VySW5wdXREYXRhLmpvYnRpdGxlLFxuICAgICAgICB9KTtcbiAgICAgICAgZm9ybUVkaXRQb3B1cC5jbG9zZSgpO1xuICAgICAgfSk7XG4gICAgdXNlckluZm9VcGRhdGVcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwi0J7RiNC40LHQutCwLiDQl9Cw0L/RgNC+0YEg0L3QtSDQstGL0L/QvtC70L3QtdC9OiBcIiwgZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGZvcm1FZGl0UG9wdXAucmVuZGVyTG9hZGluZyhcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcbiAgICAgIH0pO1xuICB9XG4pO1xuXG5mb3JtQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5mb3JtRWRpdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wb3B1cFdpdGhDb25maXJtYXRpb24uc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmZvcm1BZGRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgZm9ybVZhbGlkYXRvcnNbXCJmb3JtLXByb2ZpbGVcIl0ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGZvcm1FZGl0UG9wdXAuc2V0SW5wdXRWYWx1ZXModXNlckluZm8uZ2V0VXNlckluZm8oKSk7XG4gIGZvcm1FZGl0UG9wdXAub3BlbigpO1xufSk7XG5cbmJ1dHRvbkFkZFBob3RvLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGZvcm1WYWxpZGF0b3JzW1wicG9wdXAtYWRkLXBob3RvXCJdLnJlc2V0VmFsaWRhdGlvbigpO1xuICBmb3JtQWRkUG9wdXAub3BlbigpO1xufSk7XG5cbmJ1dHRvbkF2YXRhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBmb3JtVmFsaWRhdG9yc1tcInBvcHVwLWF2YXRhclwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgZm9ybUF2YXRhci5vcGVuKCk7XG59KTtcbiJdLCJuYW1lcyI6WyJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlVG9nZ2xlTGlrZSIsInRoaXMiLCJfY2FyZEl0ZW0iLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9saWtlcyIsImxpa2VzIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfdHJhc2hCdXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsIl9idXR0b25MaWtlRWxlbWVudCIsIl9jb3VudExpa2VFbGVtIiwiX2ltYWdlRWxlbSIsIl9jYXB0aW9uRWxlbSIsIl9oYW5kbGVEZWxldGUiLCJfaGFuZGxlVG9nZ2xlTGlrZSIsIl91c2VySWQiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJzcmMiLCJsaW5rIiwiYWx0IiwibmFtZSIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwib3duZXIiLCJfaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpc0xpa2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVGdWxsc2NyZWVuIiwiQm9vbGVhbiIsImZpbmQiLCJpdGVtIiwicmVtb3ZlIiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2J1dHRvbkVsZW1lbnQiLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvcm1JbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yTWVzc2FnZSIsImZvcm1FcnJvciIsImlkIiwic29tZSIsImlucHV0RWxlbWVudCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJkaXNhYmxlQnV0dG9uIiwiYWN0aXZhdGVCdXR0b24iLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsInJlc2V0Iiwic2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiY2FyZEl0ZW1zIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfZm9ybSIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwid2hpY2giLCJhY3RpdmVQb3B1cCIsImNsb3NlIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cFdpdGhJbWFnZSIsIl9mdWxsc2NyZWVuSW1hZ2UiLCJfZnVsbHNjcmVlbkNhcHRpb24iLCJjYXJkSXRlbSIsIlBvcHVwV2l0aEZvcm0iLCJmb3JtVmFsaWRhdG9yIiwiZm9ybVN1Ym1pdCIsIl9mb3JtU3VibWl0IiwiX2Zvcm1WYWxpZGF0b3IiLCJyZXNldFZhbGlkYXRpb24iLCJfc3VibWl0QnV0dG9uIiwidGV4dCIsIl9pbnB1dFZhbHVlcyIsImlucHV0SXRlbSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJjb2xsYmFjayIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJhdmF0YXJTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2F2YXRhckVsZW1lbnQiLCJmdWxsbmFtZSIsImpvYnRpdGxlIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJhdmF0YXJVUkwiLCJBcGkiLCJfYXV0aG9yaXphdGlvbiIsImF1dGhvcml6YXRpb24iLCJfY29ob3J0IiwiY29ob3J0IiwiX2Jhc2V1cmwiLCJiYXNldXJsIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwiaGVhZGVycyIsInRoZW4iLCJfaGFuZGxlUmVzcG9uc2UiLCJuYW1lSW5wdXRWYWx1ZSIsInRpdGxlSW5wdXRWYWx1ZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJjYXJkSW5wdXREYXRhIiwiY2FyZG5hbWUiLCJjYXJkSWQiLCJ1cmxJbWFnZSIsImF2YXRhciIsImJ1dHRvbkFkZFBob3RvIiwiYnV0dG9uRWRpdFByb2ZpbGUiLCJidXR0b25BdmF0YXIiLCJmb3JtVmFsaWRhdG9ycyIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJhcGkiLCJ1c2VySW5mbyIsImFsbCIsImdldFVzZXJJbmZvQXBpIiwiZ2V0SW5pdGlhbENhcmRzIiwiY2FyZHMiLCJzZXRVc2VyQXZhdGFyIiwic2V0VXNlckluZm8iLCJjYXJkc0xpc3QiLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwicG9wdXBXaXRoSW1hZ2UiLCJoYW5kbGVGdWxsc2NyZWVuQ2xpY2siLCJvcGVuIiwicG9wdXBXaXRoQ29uZmlybWF0aW9uIiwiY2FyZCIsInJlbmRlckxvYWRpbmciLCJzZXRTdWJtaXRIYW5kbGVyIiwiZGVsZXRlUG9zdCIsImRlbGV0ZUNhcmQiLCJmaW5hbGx5IiwiY2hhbmdlQ2FyZExpa2VTdGF0dXMiLCJzdGF0dXNsaWtldG9nZ2xlIiwiZ2VuZXJhdGVDYXJkIiwiZm9ybUFkZFBvcHVwIiwiYWRkTmV3Q2FyZCIsImZvcm1BdmF0YXIiLCJ1cGRhdGVBdmF0YXIiLCJmb3JtRWRpdFBvcHVwIiwidXNlcklucHV0RGF0YSIsInVwZGF0ZVVzZXJJbmZvIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJzZXRJbnB1dFZhbHVlcyIsImdldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==